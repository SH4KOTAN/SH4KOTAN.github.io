<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AutoBlog ‚Äî Accueil</title>
  <meta name="description" content="Blog automobile ‚Äî cartes par mod√®le, articles, dark mode" />
  <style>
    :root{
      --bg: #0f172a; /* dark bg fallback */
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#0ea5e9;
      --shadow: 0 6px 20px rgba(2,6,23,0.12);
      --glass: rgba(255,255,255,0.06);
    }
    /* Light theme vars */
    :root[data-theme='light']{
      --bg: #f8fafc;
      --card: #ffffff;
      --muted: #6b7280;
      --accent: #0ea5e9;
      --shadow: 0 10px 30px rgba(2,6,23,0.06);
      --glass: rgba(2,6,23,0.03);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg), #0000);
      color: #0b1220;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:32px;
      transition:background .25s, color .25s;
    }
    [data-theme='dark'] body{ color: #e6eef8; }

    .container{max-width:1100px;margin:0 auto}

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:28px;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo{
      width:54px;height:54px;border-radius:12px;
      display:flex;align-items:center;justify-content:center;
      font-weight:700;color:white;background:linear-gradient(135deg,#ef4444,#f59e0b);
      box-shadow:var(--shadow);
    }
    h1{font-size:20px;margin:0}
    .subtitle{font-size:13px;color:var(--muted);margin-top:2px}

    .controls{display:flex;gap:10px;align-items:center}
    .search{
      position:relative;
    }
    .search input{
      padding:10px 12px;border-radius:10px;border:1px solid var(--glass);
      background:transparent;outline:none;width:260px;color:inherit;
      box-shadow:var(--shadow);
    }
    .btn{
      padding:9px 12px;border-radius:10px;border:1px solid var(--glass);
      background:transparent;cursor:pointer;
    }

    /* Cards grid */
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
      gap:18px;
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
      border-radius:14px;
      overflow:hidden;
      box-shadow:var(--shadow);
      transition:transform .18s ease, box-shadow .18s;
      cursor:pointer;
      border:1px solid var(--glass);
    }
    .card:hover{ transform:translateY(-6px) }
    .card .cover{height:150px; background-size:cover;background-position:center}
    .card .content{padding:14px}
    .card h3{margin:0;font-size:16px}
    .card p{margin:8px 0 0;color:var(--muted);font-size:13px}

    .tag{display:inline-block;padding:6px 8px;border-radius:999px;font-size:12px;border:1px solid var(--glass);margin-right:6px}

    /* Side panel / details */
    .panel{
      position:fixed;top:32px;right:32px;bottom:32px;width:460px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
      border-radius:14px;padding:18px;box-shadow:0 20px 60px rgba(2,6,23,0.48);
      transform:translateX(20px) scale(.99);opacity:0;pointer-events:none;transition:all .25s;
      border:1px solid var(--glass);backdrop-filter: blur(6px);
    }
    .panel.open{transform:none;opacity:1;pointer-events:auto}
    .panel .hd{display:flex;gap:10px;align-items:center}
    .panel .hd img{width:80px;height:56px;object-fit:cover;border-radius:8px}
    .panel .hd .meta{flex:1}
    .panel .hd .meta h2{margin:0;font-size:18px}
    .panel .hd .meta p{margin:6px 0 0;color:var(--muted);font-size:13px}
    .panel .close{border:none;background:transparent;font-size:18px;cursor:pointer}

    .articles-list{margin-top:14px;overflow:auto;max-height:calc(100% - 220px);padding-right:6px}
    .article-item{padding:12px;border-radius:10px;border:1px solid var(--glass);margin-bottom:10px;background:transparent;cursor:pointer}
    .article-item h4{margin:0;font-size:15px}
    .article-item p{margin:8px 0 0;color:var(--muted);font-size:13px}

    /* Article reader */
    .reader{
      position:fixed;left:50%;top:50%;transform:translate(-50%,-50%) scale(.98);width:90%;max-width:900px;max-height:90%;
      background:var(--card);color:inherit;border-radius:12px;padding:22px;box-shadow:0 40px 120px rgba(2,6,23,0.6);
      opacity:0;pointer-events:none;transition:all .22s;overflow:auto;border:1px solid var(--glass);
    }
    .reader.open{opacity:1;pointer-events:auto;transform:translate(-50%,-50%) scale(1)}
    .reader h1{margin-top:0}
    .reader .meta{color:var(--muted);font-size:13px;margin-bottom:12px}
    .reader img{width:100%;height:auto;border-radius:8px;margin:12px 0}

    /* Footer */
    footer{text-align:center;margin-top:30px;color:var(--muted);font-size:13px}

    /* Responsiveness */
    @media (max-width:1100px){ .panel{position:fixed;left:18px;right:18px;top:auto;bottom:18px;width:auto;height:60vh} }
    @media (max-width:720px){
      header{flex-direction:column;align-items:flex-start;gap:12px}
      .search input{width:100%}
      body{padding:18px}
      .panel{right:18px;left:18px;bottom:18px;top:18px;width:auto}
      .reader{width:96%}
    }
  </style>
</head>
<body data-theme="dark">
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">AUTO</div>
        <div>
          <h1>AutoBlog</h1>
          <div class="subtitle">Cartes par mod√®le ‚Äî clique pour voir les articles</div>
        </div>
      </div>

      <div class="controls">
        <div class="search">
          <input id="search" placeholder="Rechercher mod√®le ou article..." />
        </div>
        <button id="themeToggle" class="btn" title="Basculer th√®me">‚òÄ/üåô</button>
      </div>
    </header>

    <main>
      <section>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px">
          <h2 style="margin:0">Mod√®les</h2>
          <div style="font-size:13px;color:var(--muted)">1 mod√®le ‚Ä¢ clique pour ouvrir</div>
        </div>

        <div class="grid" id="modelsGrid">
          <!-- Cards inserted by JS -->
        </div>
      </section>

      <footer>
        ¬© <span id="year"></span> AutoBlog ‚Äî Con√ßu avec ‚ù§Ô∏è
      </footer>
    </main>
  </div>

  <!-- Side panel for model details -->
  <aside id="panel" class="panel" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div class="hd">
        <img id="panelCover" src="" alt="cover" />
        <div class="meta">
          <h2 id="panelTitle">Titre</h2>
          <p id="panelSubtitle">Sous-titre</p>
        </div>
      </div>
      <div>
        <button id="closePanel" class="close" aria-label="Fermer">‚úï</button>
      </div>
    </div>

    <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap" id="panelTags"></div>

    <div class="articles-list" id="articlesList" tabindex="0">
      <!-- list of articles -->
    </div>
  </aside>

  <!-- Article reader -->
  <article id="reader" class="reader" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
      <h1 id="readerTitle"></h1>
      <div><button id="closeReader" class="btn">Fermer</button></div>
    </div>
    <div class="meta" id="readerMeta"></div>
    <img id="readerImage" alt="article image" />
    <div id="readerContent" style="line-height:1.6;color:inherit"></div>
  </article>

  <script>
    // ====== Data ======
    const models = [
      {
        id: 'toyota-gr86',
        name: 'Toyota GR86',
        subtitle: 'Coup√© sportif √† propulsion (2021+)',
        cover: 'https://images.unsplash.com/photo-1617545198800-c2e3d4f8b1c4?auto=format&fit=crop&w=1400&q=80',
        tags: ['Toyota', 'GR86', 'Sportive', 'Propulsion'],
        articles: [
          {
            id: 'gr86-1',
            title: 'Toyota GR86 ‚Äî Le retour d‚Äôune vraie sportive abordable',
            date: '2025-11-11',
            excerpt: 'La GR86 perp√©tue la lign√©e des coup√©s sportifs compacts √† propulsion accessible. Succ√©dant √† la GT86, elle est n√©e d‚Äôune collaboration avec Subaru.',
            image: 'https://images.unsplash.com/photo-1617545198800-c2e3d4f8b1c4?auto=format&fit=crop&w=1600&q=80',
            tags: ['Essai','Technique','Sportive'],
            content: `
<p>La Toyota GR86 perp√©tue la lign√©e des coup√©s sportifs compacts √† propulsion accessible. Succ√©dant √† la GT86 lanc√©e en 2012, elle na√Æt une nouvelle fois de la collaboration avec Subaru, qui propose son mod√®le jumeau : la BRZ. Pr√©sent√©e en avril 2021, la GR86 re√ßoit l‚Äôappellation ‚ÄúGR‚Äù en hommage √† Gazoo Racing, la division comp√©tition de Toyota.</p>

<p>Cette seconde g√©n√©ration reste fid√®le √† la m√™me recette : moteur atmosph√©rique, bo√Æte manuelle, deux places utiles et un ch√¢ssis aff√ªt√©. Mais elle progresse sur tous les points importants. La rigidit√© augmente, l‚Äô√©quilibre reste exemplaire et le centre de gravit√© baisse gr√¢ce √† l‚Äôutilisation d‚Äôaluminium pour le toit, le capot et les ailes. Toujours l√©g√®re, elle ne d√©passe pas 1 275 kg.</p>

<p>Sous le capot, on retrouve un 4-cylindres boxer de 2,4 litres d√©velopp√© par Subaru. Il gagne en puissance pour atteindre <strong>235 ch</strong> et <strong>250 Nm</strong>, avec une r√©ponse moteur plus franche d√®s les bas r√©gimes. Ce moteur atmosph√©rique performant mise sur la simplicit√© et le plaisir m√©canique plut√¥t que sur la suralimentation.</p>

<ul>
<li>Puissance : 235 ch</li>
<li>Couple : 250 Nm</li>
<li>0-100 km/h : ~6,3 s</li>
<li>Vitesse max : ~226 km/h</li>
</ul>

<p>La GR86 revendique ainsi une vitesse maximale de <strong>226 km/h</strong> et un <strong>0 √† 100 km/h en 6,3 secondes</strong>, transmettant la puissance uniquement aux roues arri√®re via un diff√©rentiel √† glissement limit√© Torsen. Certaines √©ditions sp√©ciales renforcent son statut d‚Äôic√¥ne moderne.</p>

<p><em>En bref : du plaisir sans artifice, une sportive analogique dans un monde devenu digital.</em></p>
`
          }
        ]
      }
    ];

    // ====== UI refs ======
    const modelsGrid = document.getElementById('modelsGrid');
    const panel = document.getElementById('panel');
    const panelTitle = document.getElementById('panelTitle');
    const panelSubtitle = document.getElementById('panelSubtitle');
    const panelCover = document.getElementById('panelCover');
    const panelTags = document.getElementById('panelTags');
    const articlesList = document.getElementById('articlesList');
    const closePanel = document.getElementById('closePanel');
    const reader = document.getElementById('reader');
    const readerTitle = document.getElementById('readerTitle');
    const readerMeta = document.getElementById('readerMeta');
    const readerImage = document.getElementById('readerImage');
    const readerContent = document.getElementById('readerContent');
    const closeReader = document.getElementById('closeReader');
    const searchInput = document.getElementById('search');
    const themeToggle = document.getElementById('themeToggle');
    const yearSpan = document.getElementById('year');

    yearSpan.textContent = new Date().getFullYear();

    // ====== Theme ======
    function applyTheme(t){
      document.documentElement.setAttribute('data-theme', t);
      document.body.setAttribute('data-theme', t);
      localStorage.setItem('autoblog:theme', t);
    }
    const saved = localStorage.getItem('autoblog:theme') || 'dark';
    applyTheme(saved);
    themeToggle.addEventListener('click', ()=>{
      const next = (document.documentElement.getAttribute('data-theme')==='dark')? 'light' : 'dark';
      applyTheme(next);
    });

    // ====== Render models grid ======
    function renderModels(filter=''){
      modelsGrid.innerHTML = '';
      const q = filter.trim().toLowerCase();
      const list = models.filter(m => {
        if(!q) return true;
        return m.name.toLowerCase().includes(q) || m.tags.join(' ').toLowerCase().includes(q) || m.articles.some(a=> a.title.toLowerCase().includes(q));
      });
      list.forEach(m=>{
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="cover" style="background-image:url('${m.cover}')"></div>
          <div class="content">
            <h3>${m.name}</h3>
            <p>${m.subtitle}</p>
            <div style="margin-top:10px">
              ${m.tags.slice(0,3).map(t=>`<span class="tag">${t}</span>`).join('')}
            </div>
          </div>
        `;
        card.addEventListener('click', ()=> openPanel(m.id));
        modelsGrid.appendChild(card);
      });

      if(list.length === 0){
        modelsGrid.innerHTML = `<div style="grid-column:1/-1;padding:18px;border-radius:12px;background:var(--card);text-align:center;color:var(--muted)">Aucun mod√®le trouv√©</div>`;
      }
    }

    // ====== Open panel for a model ======
    function openPanel(modelId){
      const m = models.find(x=>x.id===modelId);
      if(!m) return;
      panelTitle.textContent = m.name;
      panelSubtitle.textContent = m.subtitle;
      panelCover.src = m.cover;
      panelTags.innerHTML = m.tags.map(t=>`<span class="tag">${t}</span>`).join('');
      panel.classList.add('open');
      panel.setAttribute('aria-hidden','false');

      // render articles
      articlesList.innerHTML = '';
      m.articles.forEach(a=>{
        const item = document.createElement('div');
        item.className = 'article-item';
        item.innerHTML = `<h4>${a.title}</h4><p>${a.excerpt}</p>`;
        item.addEventListener('click', ()=> openArticle(a, m));
        articlesList.appendChild(item);
      });

      // focus
      setTimeout(()=>articlesList.focus(),200);
    }

    closePanel.addEventListener('click', ()=> {
      panel.classList.remove('open');
      panel.setAttribute('aria-hidden','true');
    });

    // ====== Open article reader ======
    function openArticle(article, model){
      readerTitle.textContent = article.title;
      readerMeta.innerHTML = `${model.name} ‚Ä¢ ${article.date} ‚Ä¢ ${article.tags.join(' ‚Ä¢ ')}`;
      readerImage.src = article.image;
      readerContent.innerHTML = article.content;
      reader.classList.add('open');
      reader.setAttribute('aria-hidden','false');
      // scroll to top of reader
      reader.scrollTop = 0;
    }
    closeReader.addEventListener('click', ()=> {
      reader.classList.remove('open');
      reader.setAttribute('aria-hidden','true');
    });

    // close on ESC
    window.addEventListener('keydown', (e)=>{
      if(e.key==='Escape'){
        if(reader.classList.contains('open')){ reader.classList.remove('open'); reader.setAttribute('aria-hidden','true'); }
        else if(panel.classList.contains('open')){ panel.classList.remove('open'); panel.setAttribute('aria-hidden','true'); }
      }
    });

    // search
    searchInput.addEventListener('input', (e)=>{
      renderModels(e.target.value);
    });

    // initial render
    renderModels();

    // small UX: open GR86 on load (optional) ‚Äî comment out if you don't want this
    // openPanel('toyota-gr86');
  </script>
</body>
</html>
